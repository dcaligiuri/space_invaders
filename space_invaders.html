<!DOCTYPE html>
<html>
  <head> 
    <title>
      Space Invaders!
    </title>
  </head>

<body>

<canvas id="myCanvas" width="500" height="500" style="border:1px solid #d3d3d3;">
Your browser does not support the HTML5 canvas tag.</canvas>


<img id="alien" src="alien.jpg">
<img id="ship" src ="ship.jpg">
<img id="missile" src="missile.png">


<script>
var lives = 3;
var score = 0;
var widthBoard = 500; 
var lengthBoard = 500; 
var canvas = document.getElementById("myCanvas");
var alien = document.getElementById("alien");
var ship = document.getElementById("ship");
var missile = document.getElementById("missile");
var ctx = canvas.getContext("2d");
var turnAround = false;
var friendlyMissileArr = [];
var enemyMissileArr = [];
var canShoot = true; 

function Alien(sprite, xPos, yPos){
  this.sprite = sprite;
  this.width = sprite.width;
  this.height = sprite.height;
  this.xPos = xPos;
  this.yPos = yPos;
  
  this.draw = function(){
    ctx.drawImage(this.sprite, this.xPos, this.yPos);
  }
  
  this.move = function(){
    if (this.xPos === 0){
      turnAround = true;
    }
    else if (500 - this.width < this.xPos && this.xPos < 500){
      turnAround = false;
    }
    if (turnAround == false){
      this.moveLeft();
    }
    else if (turnAround == true){
      this.moveRight();
    }
    
   
  }
  
  this.moveRight = function(){
    this.xPos = this.xPos + 10;
    this.draw();
  }
  
  this.moveLeft = function(){
    this.xPos = this.xPos - 10;
    this.draw();
  }
  
  this.moveDown = function(){
    this.yPos = this.yPos + 10;
    this.draw();
  }
}


function Ship(sprite, xPos, yPos){
  this.sprite = sprite;
  this.width = sprite.width;
  this.height = sprite.height;
  this.xPos = xPos;
  this.yPos = yPos;
  this.draw = function(){
    ctx.drawImage(this.sprite, this.xPos, this.yPos);
  }
}

function Missile(sprite, xPos, yPos){
  this.sprite = sprite;
  this.width = sprite.width;
  this.height = sprite.height;
  this.xPos = xPos;
  this.yPos = yPos;
  this.draw = function(){
    ctx.drawImage(this.sprite, this.xPos, this.yPos);
  }
  this.moveUp = function(){
    this.yPos = this.yPos - 1;
    this.draw();
  }
  this.moveDown = function(){
    this.yPos = this.yPos + 1;
    this.draw();
  }
  }


var alien1 = new Alien(alien, 25, 40);
var alien2 = new Alien(alien, 90, 40);
var alien3 = new Alien(alien, 160, 40);
var alienaa = new Alien(alien, 230, 40);
var alienbb = new Alien(alien, 300, 40);
var aliencc = new Alien(alien, 370, 40);
var aliendd = new Alien(alien, 440, 40);
var aliena = new Alien(alien, 120, 100);
var alienb = new Alien(alien, 120, 200);
var alienc = new Alien(alien, 120, 300);
var alien4 = new Alien(alien, 200, 100);
var alien5 = new Alien(alien, 200, 200);
var alien6 = new Alien(alien, 200, 300);


var alienArr = [alien1, alien2, alien3, alien4, aliena, alienaa, alienbb, aliencc, aliendd, alienb,alienc, alien5, alien6];

var ship = new Ship(ship, 200, 400);

window.onload = function() {
	ctx.beginPath();
	ctx.rect(0, 0, widthBoard, lengthBoard);
	ctx.fillStyle = "black";
	ctx.fill();
	ctx.font = "30px Arial";
	
	
  for (var x = 0; x < alienArr.length; x++){
    alienArr[x].draw();
  }
  
  
    for (var k = 0; k < alienArr.length; k++){
    var tempHighest = alienArr[0].yPos;
    if (tempHighest < alienArr[k].yPos){
      tempHighest = alienArr[k].yPos;
    }
  }
  
  for (var i = 0; i < alienArr.length; i++){
    if (alienArr[i].yPos == tempHighest){
      enemyMissileArr.push(new Missile(missile, alienArr[i].xPos + alienArr[i].width / 2, alienArr[i].yPos + alienArr[i].height + 10 ));
      }
    }

  
  
  ship.draw();
  
  setInterval(function()
	{ 
	  canShoot = true; 
		document.onkeydown = checkKey;
		
		
		
	  for (var x = 0; x < alienArr.length; x++){
      alienArr[x].move();
    }
	
		
		
	}, 1000);
 
  function checkKey(e) {
    e = e || window.event;
    
    if (e.keyCode == '37') {
      ship.xPos = ship.xPos - 10;
      ship.draw();
    }
    else if (e.keyCode == '39') {
      ship.xPos = ship.xPos + 10;
      ship.draw();
    }
    else if (e.keyCode == '32' && canShoot == true){
      var newestMissile = new Missile(missile, ship.xPos + ship.width / 2 - 3, ship.yPos - 10 );
      friendlyMissileArr.push(newestMissile);
      newestMissile.draw();
      canShoot = false; 
    }

}
}


 setInterval(function()
	{ 
	  ctx.fillStyle = "black";
	  ctx.fillRect(100,0,100,50);
	  ctx.fillStyle = "white";
	  ctx.fillText("Score : " + score,0,30);
	  ctx.fillText("Lives : " + lives, 380, 30);
	  ctx.fillStyle = "black";


    for (var i = 0; i < friendlyMissileArr.length; i++){
      friendlyMissileArr[i].moveUp();
    }
    
    for (var k = 0; k < enemyMissileArr.length; k++){
      enemyMissileArr[k].moveDown();
    }
    
    for (var x = 0; x < friendlyMissileArr.length; x++){
      for (var y = 0; y < alienArr.length; y++){
        if (alienArr[y].xPos <= friendlyMissileArr[x].xPos && friendlyMissileArr[x].xPos <= alienArr[y].width + alienArr[y].xPos &&
        friendlyMissileArr[x].yPos == alienArr[y].yPos + alienArr[y].height)
        {
          ctx.fillRect(alienArr[y].xPos, alienArr[y].yPos , alienArr[y].width ,alienArr[y].height);
          ctx.fillRect(friendlyMissileArr[x].xPos, friendlyMissileArr[x].yPos, friendlyMissileArr[x].width, friendlyMissileArr[x].height);
          alienArr.splice(y, 1);
          friendlyMissileArr.splice(x, 1);
          score = score + 10;
        }
      }
      
      }

      
	}, 1);

</script>
</body>
</html>

